{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"configuration/","title":"Configuration Guide","text":"<p>Complete reference for all Amiibot configuration options.</p>"},{"location":"configuration/#configuration-file-structure","title":"Configuration File Structure","text":"<p>Amiibot uses a JSON configuration file located at <code>config/config.json</code>. The configuration is validated using Pydantic for type safety and clear error messages.</p> <pre><code>{\n  \"database\": { ... },\n  \"messengers\": { ... }\n}\n</code></pre>"},{"location":"configuration/#database-configuration","title":"Database Configuration","text":""},{"location":"configuration/#sqlite-default","title":"SQLite (Default)","text":"<p>Perfect for personal use and getting started.</p> <pre><code>{\n  \"database\": {\n    \"engine\": \"sqlite\",\n    \"name\": \"amiibot\"\n  }\n}\n</code></pre> <p>Parameters:</p> Parameter Type Required Default Description <code>engine</code> string Yes <code>\"sqlite\"</code> Database engine type <code>name</code> string Yes <code>\"amiibot\"</code> Database file name (without .db extension)"},{"location":"configuration/#postgresql","title":"PostgreSQL","text":"<p>Recommended for production and multi-instance deployments.</p> <pre><code>{\n  \"database\": {\n    \"engine\": \"postgres\",\n    \"username\": \"amiibot_user\",\n    \"password\": \"secure_password\",\n    \"host\": \"localhost\",\n    \"port\": 5432,\n    \"name\": \"amiibot\"\n  }\n}\n</code></pre> <p>Parameters:</p> Parameter Type Required Default Description <code>engine</code> string Yes - Must be <code>\"postgres\"</code> <code>username</code> string Yes - PostgreSQL username <code>password</code> string Yes - PostgreSQL password <code>host</code> string No <code>\"127.0.0.1\"</code> PostgreSQL server IP/hostname <code>port</code> integer No <code>5432</code> PostgreSQL server port (1-65535) <code>name</code> string Yes <code>\"amiibot\"</code> Database name <p>Advantages: - \u2705 Better for production - \u2705 Supports multiple instances - \u2705 Better concurrent access - \u2705 Advanced features</p> <p>Setup:</p> <pre><code># Install PostgreSQL\nsudo apt install postgresql postgresql-contrib\n\n# Create database\nsudo -u postgres createdb amiibot\n\n# Create user\nsudo -u postgres psql\nCREATE USER amiibot_user WITH PASSWORD 'secure_password';\nGRANT ALL PRIVILEGES ON DATABASE amiibot TO amiibot_user;\n\\q\n</code></pre>"},{"location":"configuration/#messenger-configuration","title":"Messenger Configuration","text":"<p>You can configure multiple messengers with different stockist lists. Each messenger must have a unique name.</p>"},{"location":"configuration/#discord-webhook","title":"Discord Webhook","text":"<pre><code>{\n  \"messengers\": {\n    \"discord_us\": {\n      \"messenger_type\": \"discord\",\n      \"webhook_url\": \"https://discord.com/api/webhooks/123456/abcdef\",\n      \"active\": true,\n      \"embedded_messages\": true,\n      \"stockists\": [\"bestbuy.com\", \"gamestop.com\"]\n    }\n  }\n}\n</code></pre> <p>Parameters:</p> Parameter Type Required Default Description <code>messenger_type</code> string Yes - Must be <code>\"discord\"</code> <code>webhook_url</code> URL Yes - Discord webhook URL <code>active</code> boolean Yes <code>false</code> Enable/disable notifications <code>embedded_messages</code> boolean Yes <code>true</code> Use rich embeds (recommended) <code>stockists</code> array Yes - List of stockist URLs to track <p>Getting a Discord Webhook:</p> <ol> <li>Open Discord and go to your server</li> <li>Right-click the channel \u2192 Edit Channel</li> <li>Go to Integrations \u2192 Webhooks</li> <li>Click \"New Webhook\" or \"Create Webhook\"</li> <li>Give it a name and avatar (optional)</li> <li>Copy the webhook URL</li> </ol> <p>Multiple Discord Webhooks</p> <p>You can create multiple webhooks for different channels:</p> <pre><code>{\n  \"messengers\": {\n    \"discord_us\": {\n      \"messenger_type\": \"discord\",\n      \"webhook_url\": \"https://discord.com/api/webhooks/111/aaa\",\n      \"active\": true,\n      \"embedded_messages\": true,\n      \"stockists\": [\"bestbuy.com\"]\n    },\n    \"discord_uk\": {\n      \"messenger_type\": \"discord\",\n      \"webhook_url\": \"https://discord.com/api/webhooks/222/bbb\",\n      \"active\": true,\n      \"embedded_messages\": true,\n      \"stockists\": [\"nintendo.co.uk\"]\n    }\n  }\n}\n</code></pre>"},{"location":"configuration/#telegram-bot","title":"Telegram Bot","text":"<pre><code>{\n  \"messengers\": {\n    \"telegram_main\": {\n      \"messenger_type\": \"telegram\",\n      \"bot_token\": \"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11\",\n      \"chat_id\": \"123456789\",\n      \"active\": true,\n      \"embedded_messages\": true,\n      \"stockists\": [\"nintendo.co.uk\", \"game.co.uk\"]\n    }\n  }\n}\n</code></pre> <p>Parameters:</p> Parameter Type Required Default Description <code>messenger_type</code> string Yes - Must be <code>\"telegram\"</code> <code>bot_token</code> string Yes - Telegram bot API token <code>chat_id</code> string Yes - Telegram chat ID <code>active</code> boolean Yes <code>false</code> Enable/disable notifications <code>embedded_messages</code> boolean Yes <code>true</code> Use formatted messages <code>stockists</code> array Yes - List of stockist URLs to track <p>Setting up a Telegram Bot:</p> <ol> <li>Create Bot:</li> <li>Open Telegram and search for @BotFather</li> <li>Send <code>/newbot</code></li> <li>Follow the instructions to choose a name and username</li> <li> <p>Copy the bot token</p> </li> <li> <p>Get Chat ID:</p> </li> <li>Send <code>/start</code> to @userinfobot</li> <li>It will respond with your user ID (this is your chat_id)</li> </ol> <p>OR for group chats:    - Add your bot to the group    - Add @userinfobot to the group    - Your chat ID will be shown (starts with -)</p> <ol> <li>Start conversation:</li> <li>Send <code>/start</code> to your bot</li> <li>Now it can send you messages</li> </ol>"},{"location":"configuration/#stockists-configuration","title":"Stockists Configuration","text":"<p>Each messenger can track different stockists. Available stockists:</p>"},{"location":"configuration/#north-america","title":"North America","text":"Stockist Code Country Best Buy <code>bestbuy.com</code> \ud83c\uddfa\ud83c\uddf8 USA GameStop <code>gamestop.com</code> \ud83c\uddfa\ud83c\uddf8 USA Best Buy CA <code>bestbuy.ca</code> \ud83c\udde8\ud83c\udde6 Canada The Source <code>thesource.ca</code> \ud83c\udde8\ud83c\udde6 Canada"},{"location":"configuration/#europe","title":"Europe","text":"Stockist Code Country Nintendo UK <code>nintendo.co.uk</code> \ud83c\uddec\ud83c\udde7 UK GAME <code>game.co.uk</code> \ud83c\uddec\ud83c\udde7 UK ShopTo <code>shopto.net</code> \ud83c\uddec\ud83c\udde7 UK CeX <code>uk.webuy.com</code> \ud83c\uddec\ud83c\udde7 UK"},{"location":"configuration/#asia","title":"Asia","text":"Stockist Code Country Play-Asia <code>play-asia.com</code> \ud83c\udf0f Asia Meccha Japan <code>meccha-japan.com</code> \ud83c\uddef\ud83c\uddf5 Japan <p>Example Configuration:</p> <pre><code>{\n  \"messengers\": {\n    \"all_regions\": {\n      \"messenger_type\": \"discord\",\n      \"webhook_url\": \"YOUR_WEBHOOK_URL\",\n      \"active\": true,\n      \"embedded_messages\": true,\n      \"stockists\": [\n        \"bestbuy.com\",\n        \"gamestop.com\",\n        \"nintendo.co.uk\",\n        \"game.co.uk\",\n        \"play-asia.com\"\n      ]\n    }\n  }\n}\n</code></pre> <p>Stockist List Validation</p> <p>The stockists list must contain at least one valid stockist URL. The configuration will fail validation if the list is empty or contains invalid URLs.</p>"},{"location":"configuration/#complete-example","title":"Complete Example","text":"<p>Here's a complete configuration example with multiple messengers and databases:</p> Production (PostgreSQL + Multiple Messengers)Development (SQLite + Single Messenger) <pre><code>{\n  \"database\": {\n    \"engine\": \"postgres\",\n    \"username\": \"amiibot_user\",\n    \"password\": \"secure_password_here\",\n    \"host\": \"localhost\",\n    \"port\": 5432,\n    \"name\": \"amiibot\"\n  },\n  \"messengers\": {\n    \"discord_us_general\": {\n      \"messenger_type\": \"discord\",\n      \"webhook_url\": \"https://discord.com/api/webhooks/111/aaa\",\n      \"active\": true,\n      \"embedded_messages\": true,\n      \"stockists\": [\"bestbuy.com\", \"gamestop.com\"]\n    },\n    \"discord_uk_general\": {\n      \"messenger_type\": \"discord\",\n      \"webhook_url\": \"https://discord.com/api/webhooks/222/bbb\",\n      \"active\": true,\n      \"embedded_messages\": true,\n      \"stockists\": [\"nintendo.co.uk\", \"game.co.uk\", \"shopto.net\"]\n    },\n    \"telegram_alerts\": {\n      \"messenger_type\": \"telegram\",\n      \"bot_token\": \"123456:ABC-DEF\",\n      \"chat_id\": \"987654321\",\n      \"active\": true,\n      \"embedded_messages\": true,\n      \"stockists\": [\"play-asia.com\", \"meccha-japan.com\"]\n    }\n  }\n}\n</code></pre> <pre><code>{\n  \"database\": {\n    \"engine\": \"sqlite\",\n    \"name\": \"amiibot_dev\"\n  },\n  \"messengers\": {\n    \"discord_test\": {\n      \"messenger_type\": \"discord\",\n      \"webhook_url\": \"https://discord.com/api/webhooks/TEST/test\",\n      \"active\": true,\n      \"embedded_messages\": true,\n      \"stockists\": [\"bestbuy.com\"]\n    }\n  }\n}\n</code></pre>"},{"location":"configuration/#configuration-validation","title":"Configuration Validation","text":"<p>Amiibot validates your configuration at startup. Common validation errors:</p>"},{"location":"configuration/#empty-stockists-list","title":"Empty Stockists List","text":"<pre><code>Configuration validation failed:\n  - Discord messenger must have at least one stockist configured at messengers.discord_main.stockists\n</code></pre> <p>Fix: Add at least one stockist to the list.</p>"},{"location":"configuration/#invalid-webhook-url","title":"Invalid Webhook URL","text":"<pre><code>Configuration validation failed:\n  - Invalid Discord webhook URL at messengers.discord_main.webhook_url\n</code></pre> <p>Fix: Ensure the webhook URL contains <code>discord.com/api/webhooks/</code>.</p>"},{"location":"configuration/#missing-required-fields","title":"Missing Required Fields","text":"<pre><code>Configuration validation failed:\n  - Missing required field: bot_token at messengers.telegram_main\n</code></pre> <p>Fix: Add the missing field to your configuration.</p>"},{"location":"configuration/#environment-variables","title":"Environment Variables","text":"<p>For sensitive data, you can use environment variables (requires code modification):</p> <pre><code>import os\n\nconfig = {\n    \"database\": {\n        \"password\": os.getenv(\"DB_PASSWORD\", \"default_password\")\n    }\n}\n</code></pre>"},{"location":"deployment/","title":"Deployment Guide","text":"<p>Production deployment strategies for Amiibot.</p>"},{"location":"deployment/#deployment-options","title":"Deployment Options","text":""},{"location":"deployment/#option-1-cron-job-simplest","title":"Option 1: Cron Job (Simplest)","text":"<p>Best for: Personal use, simple setups</p> <pre><code># Edit crontab\ncrontab -e\n\n# Run every 30 minutes\n*/30 * * * * cd /path/to/Amiibot &amp;&amp; /path/to/Amiibot/.venv/bin/python amiibot.py &gt;&gt; /path/to/Amiibot/cron.log 2&gt;&amp;1\n</code></pre> <p>Advantages: - \u2705 Simple setup - \u2705 No additional services - \u2705 Works on any system with cron</p> <p>Disadvantages: - \u274c No automatic restart on failure - \u274c Limited monitoring - \u274c Manual log management</p>"},{"location":"deployment/#option-2-systemd-service-recommended","title":"Option 2: Systemd Service (Recommended)","text":"<p>Best for: Production, 24/7 operation, Linux servers</p>"},{"location":"deployment/#create-service-file","title":"Create Service File","text":"<p>Create <code>/etc/systemd/system/amiibot.service</code>:</p> <pre><code>[Unit]\nDescription=Amiibot Stock Notifier\nAfter=network.target postgresql.service\nWants=postgresql.service\n\n[Service]\nType=simple\nUser=amiibot\nGroup=amiibot\nWorkingDirectory=/opt/amiibot\nEnvironment=\"PATH=/opt/amiibot/.venv/bin\"\nExecStart=/opt/amiibot/.venv/bin/python amiibot.py\nRestart=on-failure\nRestartSec=30\nStandardOutput=append:/var/log/amiibot/stdout.log\nStandardError=append:/var/log/amiibot/stderr.log\n\n# Security\nNoNewPrivileges=true\nPrivateTmp=true\nProtectSystem=strict\nProtectHome=true\nReadWritePaths=/opt/amiibot\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>"},{"location":"deployment/#setup-steps","title":"Setup Steps","text":"<pre><code># Create user\nsudo useradd -r -s /bin/false amiibot\n\n# Create directory\nsudo mkdir -p /opt/amiibot\nsudo mkdir -p /var/log/amiibot\n\n# Copy files\nsudo cp -r /path/to/Amiibot/* /opt/amiibot/\n\n# Set permissions\nsudo chown -R amiibot:amiibot /opt/amiibot\nsudo chown -R amiibot:amiibot /var/log/amiibot\n\n# Enable and start service\nsudo systemctl daemon-reload\nsudo systemctl enable amiibot\nsudo systemctl start amiibot\n\n# Check status\nsudo systemctl status amiibot\n</code></pre>"},{"location":"deployment/#service-management","title":"Service Management","text":"<pre><code># Start service\nsudo systemctl start amiibot\n\n# Stop service\nsudo systemctl stop amiibot\n\n# Restart service\nsudo systemctl restart amiibot\n\n# View logs\nsudo journalctl -u amiibot -f\n\n# Check status\nsudo systemctl status amiibot\n</code></pre> <p>Advantages: - \u2705 Automatic restart on failure - \u2705 Integrated logging - \u2705 System-level management - \u2705 Starts on boot</p>"},{"location":"deployment/#production-checklist","title":"Production Checklist","text":""},{"location":"deployment/#pre-deployment","title":"Pre-Deployment","text":"<ul> <li>[ ] Configuration file created and validated</li> <li>[ ] Database configured (PostgreSQL recommended)</li> <li>[ ] Messenger webhooks/tokens tested</li> <li>[ ] Dependencies installed</li> <li>[ ] Logs directory created</li> <li>[ ] Permissions set correctly</li> </ul>"},{"location":"deployment/#security","title":"Security","text":"<ul> <li>[ ] Config file not world-readable: <code>chmod 600 config/config.json</code></li> <li>[ ] Separate user account created</li> <li>[ ] No sensitive data in logs</li> <li>[ ] Database password secure</li> <li>[ ] Webhook URLs kept private</li> </ul>"},{"location":"deployment/#monitoring","title":"Monitoring","text":"<ul> <li>[ ] Log rotation configured (automatic with RotatingFileHandler)</li> <li>[ ] Disk space monitoring set up</li> <li>[ ] Error alerting configured</li> <li>[ ] Database backup scheduled</li> </ul>"},{"location":"deployment/#performance","title":"Performance","text":"<ul> <li>[ ] Appropriate scrape interval set</li> <li>[ ] Resource limits configured (systemd)</li> <li>[ ] Database optimized</li> <li>[ ] Old records cleanup scheduled</li> </ul>"},{"location":"deployment/#monitoring-and-maintenance","title":"Monitoring and Maintenance","text":""},{"location":"deployment/#log-monitoring","title":"Log Monitoring","text":"<pre><code># View recent logs\ntail -f /var/log/amiibot/stdout.log\n\n# Check for errors\ngrep ERROR /opt/amiibot/log.txt\n\n# Log rotation status\nls -lh /opt/amiibot/log.txt*\n</code></pre>"},{"location":"deployment/#database-maintenance","title":"Database Maintenance","text":"<pre><code># SQLite vacuum (optimize)\nsqlite3 amiibot.db \"VACUUM;\"\n\n# PostgreSQL maintenance\npsql -U amiibot_user -d amiibot -c \"VACUUM ANALYZE;\"\n\n# Check database size\ndu -h amiibot.db  # SQLite\npsql -U amiibot_user -d amiibot -c \"SELECT pg_size_pretty(pg_database_size('amiibot'));\"  # PostgreSQL\n</code></pre>"},{"location":"deployment/#cleanup-old-records","title":"Cleanup Old Records","text":"<p>Add to crontab to run weekly:</p> <pre><code># Clean records older than 30 days\n0 0 * * 0 cd /opt/amiibot &amp;&amp; /opt/amiibot/.venv/bin/python -c \"from database import Database; from config.config import load_config; config = load_config('config/config.json'); db = Database(config.database); db.cleanup_old_records(30)\" &gt;&gt; /var/log/amiibot/cleanup.log 2&gt;&amp;1\n</code></pre>"},{"location":"deployment/#scaling","title":"Scaling","text":""},{"location":"deployment/#multiple-instances","title":"Multiple Instances","text":"<p>Run multiple instances for different regions:</p> <pre><code># Instance 1: US stockists\n/opt/amiibot-us/\n  config/config.json  # US stockists only\n\n# Instance 2: UK stockists\n/opt/amiibot-uk/\n  config/config.json  # UK stockists only\n</code></pre> <p>Each with its own systemd service: - <code>amiibot-us.service</code> - <code>amiibot-uk.service</code></p>"},{"location":"deployment/#load-balancing","title":"Load Balancing","text":"<p>For high-volume scraping: - Use PostgreSQL for shared database - Run instances on multiple servers - Coordinate scraping times to avoid overlap</p>"},{"location":"deployment/#backup-strategy","title":"Backup Strategy","text":""},{"location":"deployment/#configuration-backup","title":"Configuration Backup","text":"<pre><code># Backup config (automated)\n0 0 * * * cp /opt/amiibot/config/config.json /backup/amiibot-config-$(date +\\%Y\\%m\\%d).json\n</code></pre>"},{"location":"deployment/#database-backup","title":"Database Backup","text":"<pre><code># SQLite backup\ncp amiibot.db amiibot.db.backup\n\n# PostgreSQL backup\npg_dump -U amiibot_user amiibot &gt; amiibot_backup.sql\n\n# Automated PostgreSQL backup (cron)\n0 2 * * * pg_dump -U amiibot_user amiibot | gzip &gt; /backup/amiibot-$(date +\\%Y\\%m\\%d).sql.gz\n</code></pre>"},{"location":"deployment/#updates-and-upgrades","title":"Updates and Upgrades","text":""},{"location":"deployment/#update-amiibot","title":"Update Amiibot","text":"<pre><code># Pull latest code\ncd /opt/amiibot\nsudo -u amiibot git pull\n\n# Update dependencies\nsudo -u amiibot uv sync\n\n# Restart service\nsudo systemctl restart amiibot\n</code></pre>"},{"location":"deployment/#database-migration","title":"Database Migration","text":"<p>When upgrading between versions:</p> <pre><code># Backup first!\npg_dump -U amiibot_user amiibot &gt; backup.sql\n\n# Run migrations (if any)\npython migrate.py\n\n# Test\npython amiibot.py\n</code></pre>"},{"location":"deployment/#troubleshooting-production-issues","title":"Troubleshooting Production Issues","text":"<p>See Troubleshooting Guide for detailed solutions.</p>"},{"location":"deployment/#quick-diagnostics","title":"Quick Diagnostics","text":"<pre><code># Check service status\nsudo systemctl status amiibot\n\n# View recent logs\nsudo journalctl -u amiibot -n 100\n\n# Check resource usage\ntop -p $(pgrep -f amiibot)\n\n# Check disk space\ndf -h\n\n# Check database connectivity\npsql -U amiibot_user -d amiibot -c \"SELECT 1;\"\n</code></pre>"},{"location":"deployment/#best-practices","title":"Best Practices","text":"<ol> <li>Use PostgreSQL for Production: More reliable than SQLite</li> <li>Monitor Logs Regularly: Set up log monitoring alerts</li> <li>Backup Database Weekly: Automate with cron</li> <li>Keep Config Secure: Use proper file permissions</li> <li>Test Before Deploying: Run locally first</li> <li>Document Changes: Keep deployment notes</li> <li>Monitor Disk Space: Logs and database grow over time</li> <li>Update Regularly: Stay current with latest version</li> </ol>"},{"location":"gettingstarted/","title":"Getting Started","text":"<p>Amiibot is a production-ready web scraper and stock notifier for Amiibo. Track multiple retailers and get notified instantly when stock changes occur (<code>In stock</code>, <code>Out of stock</code>, <code>Price change</code>).</p>"},{"location":"gettingstarted/#quick-start","title":"\ud83c\udfaf Quick Start","text":"<pre><code># Clone the repository\ngit clone https://github.com/ecoppen/Amiibot.git\ncd Amiibot\n\n# Install dependencies\nuv sync\n\n# Configure the bot\ncp config/config.example.json config/config.json\n# Edit config/config.json with your settings\n\n# Run the bot\npython amiibot.py\n</code></pre>"},{"location":"gettingstarted/#requirements","title":"\ud83d\udccb Requirements","text":""},{"location":"gettingstarted/#hardware-requirements","title":"Hardware Requirements","text":"<p>Minimum: - 512MB RAM - 1GB disk space - Network connection</p> <p>Recommended: - 1GB+ RAM - 5GB+ disk space - Stable internet connection - 24/7 availability</p>"},{"location":"gettingstarted/#supported-platforms","title":"Supported Platforms","text":"<ul> <li>\u2705 Linux (Ubuntu, Debian, CentOS, etc.)</li> <li>\u2705 macOS (10.15+)</li> <li>\u2705 Windows (10/11)</li> <li>\u2705 Raspberry Pi (3B+ or newer)</li> </ul>"},{"location":"gettingstarted/#software-requirements","title":"Software Requirements","text":"<p>Required: - Python 3.12 or higher - uv (package manager) - Chrome/Chromium (for Selenium)</p> <p>Optional: - PostgreSQL (for production) - systemd (for service management) - cron (for scheduling)</p>"},{"location":"gettingstarted/#installation","title":"\ud83d\udce6 Installation","text":""},{"location":"gettingstarted/#method-1-using-uv-recommended","title":"Method 1: Using uv (Recommended)","text":"<p>uv is the fastest and most reliable way to install Amiibot.</p> <pre><code># Install uv if you haven't already\ncurl -LsSf https://astral.sh/uv/install.sh | sh\n\n# Clone the repository\ngit clone https://github.com/ecoppen/Amiibot.git\ncd Amiibot\n\n# Install dependencies\nuv sync\n\n# The virtual environment is automatically created at .venv/\n</code></pre>"},{"location":"gettingstarted/#method-2-using-pip","title":"Method 2: Using pip","text":"<pre><code># Clone the repository\ngit clone https://github.com/ecoppen/Amiibot.git\ncd Amiibot\n\n# Create virtual environment\npython -m venv .venv\n\n# Activate virtual environment\nsource .venv/bin/activate  # Linux/macOS\n# OR\n.venv\\Scripts\\activate  # Windows\n\n# Install dependencies\npip install -e .\n</code></pre>"},{"location":"gettingstarted/#method-3-development-installation","title":"Method 3: Development Installation","text":"<p>For contributors and developers:</p> <pre><code># Clone the repository\ngit clone https://github.com/ecoppen/Amiibot.git\ncd Amiibot\n\n# Install with development dependencies\nuv sync --group dev\n\n# Install pre-commit hooks\npre-commit install\n</code></pre>"},{"location":"gettingstarted/#configuration","title":"\u2699\ufe0f Configuration","text":""},{"location":"gettingstarted/#step-1-create-configuration-file","title":"Step 1: Create Configuration File","text":"<pre><code>cd config\ncp config.example.json config.json\n</code></pre>"},{"location":"gettingstarted/#step-2-basic-configuration","title":"Step 2: Basic Configuration","text":"<p>Edit <code>config/config.json</code> with your favorite editor:</p> <pre><code>nano config/config.json  # or vim, code, etc.\n</code></pre> <p>Minimal configuration example:</p> <pre><code>{\n  \"database\": {\n    \"engine\": \"sqlite\",\n    \"name\": \"amiibot\"\n  },\n  \"messengers\": {\n    \"my_discord\": {\n      \"messenger_type\": \"discord\",\n      \"webhook_url\": \"https://discord.com/api/webhooks/YOUR_WEBHOOK_HERE\",\n      \"active\": true,\n      \"embedded_messages\": true,\n      \"stockists\": [\"bestbuy.com\", \"gamestop.com\"]\n    }\n  }\n}\n</code></pre> <p>Configuration Validation</p> <p>Amiibot validates your configuration at startup and will show clear error messages if something is wrong.</p>"},{"location":"gettingstarted/#step-3-database-setup","title":"Step 3: Database Setup","text":"SQLite (Easiest)PostgreSQL (Production) <p>No additional setup required! Just specify in config:</p> <pre><code>{\n  \"database\": {\n    \"engine\": \"sqlite\",\n    \"name\": \"amiibot\"\n  }\n}\n</code></pre> <pre><code># Install PostgreSQL\nsudo apt install postgresql postgresql-contrib\n\n# Create database\nsudo -u postgres createdb amiibot\n\n# Create user (optional)\nsudo -u postgres createuser amiibot_user\n</code></pre> <p>Configuration:</p> <pre><code>{\n  \"database\": {\n    \"engine\": \"postgres\",\n    \"username\": \"amiibot_user\",\n    \"password\": \"your_password\",\n    \"host\": \"localhost\",\n    \"port\": 5432,\n    \"name\": \"amiibot\"\n  }\n}\n</code></pre>"},{"location":"gettingstarted/#step-4-messenger-setup","title":"Step 4: Messenger Setup","text":"DiscordTelegram <ol> <li>Go to your Discord server</li> <li>Server Settings \u2192 Integrations \u2192 Webhooks</li> <li>Click \"New Webhook\"</li> <li>Choose a channel and copy the webhook URL</li> <li>Add to configuration:</li> </ol> <pre><code>{\n  \"messengers\": {\n    \"discord_main\": {\n      \"messenger_type\": \"discord\",\n      \"webhook_url\": \"YOUR_WEBHOOK_URL_HERE\",\n      \"active\": true,\n      \"embedded_messages\": true,\n      \"stockists\": [\"bestbuy.com\"]\n    }\n  }\n}\n</code></pre> <ol> <li>Message @BotFather on Telegram</li> <li>Send <code>/newbot</code> and follow instructions</li> <li>Copy the bot token</li> <li>Send <code>/start</code> to @userinfobot to get your chat ID</li> <li>Add to configuration:</li> </ol> <pre><code>{\n  \"messengers\": {\n    \"telegram_main\": {\n      \"messenger_type\": \"telegram\",\n      \"bot_token\": \"YOUR_BOT_TOKEN\",\n      \"chat_id\": \"YOUR_CHAT_ID\",\n      \"active\": true,\n      \"embedded_messages\": true,\n      \"stockists\": [\"nintendo.co.uk\"]\n    }\n  }\n}\n</code></pre> <p>Multiple Messengers</p> <p>You can configure multiple Discord and Telegram messengers with different stockist lists!</p>"},{"location":"gettingstarted/#running-the-bot","title":"\ud83d\ude80 Running the Bot","text":""},{"location":"gettingstarted/#manual-execution","title":"Manual Execution","text":"<pre><code># Activate virtual environment\nsource .venv/bin/activate  # Linux/macOS\n# OR\n.venv\\Scripts\\activate  # Windows\n\n# Run the bot\npython amiibot.py\n</code></pre> <p>You should see output like:</p> <pre><code>2026-02-17 10:00:00 - root - INFO - config/config.json loaded\n2026-02-17 10:00:00 - root - INFO - sqlite loaded\n2026-02-17 10:00:00 - root - INFO - database tables loaded\n2026-02-17 10:00:00 - root - INFO - discord_main setup to send messages to Discord\n2026-02-17 10:00:00 - root - INFO - Now tracking bestbuy.com\n2026-02-17 10:00:00 - root - INFO - Now scraping 1 site(s): Best Buy US\n2026-02-17 10:00:00 - root - INFO - Starting scraper...\n</code></pre>"},{"location":"gettingstarted/#scheduled-execution-cron","title":"Scheduled Execution (Cron)","text":"<p>For automatic execution every 30 minutes:</p> <pre><code># Edit crontab\ncrontab -e\n\n# Add this line\n*/30 * * * * cd /path/to/Amiibot &amp;&amp; /path/to/Amiibot/.venv/bin/python amiibot.py &gt;&gt; /path/to/Amiibot/cron.log 2&gt;&amp;1\n</code></pre> <p>Finding Python Path</p> <pre><code>cd /path/to/Amiibot\nsource .venv/bin/activate\nwhich python  # Copy this path for crontab\n</code></pre>"},{"location":"gettingstarted/#using-the-runner-script","title":"Using the Runner Script","text":"<p>The repository includes a convenient runner script:</p> <pre><code># Make it executable\nchmod +x amiibot_runner.sh\n\n# Run it\n./amiibot_runner.sh\n</code></pre>"},{"location":"gettingstarted/#verification","title":"\ud83d\udd0d Verification","text":""},{"location":"gettingstarted/#check-logs","title":"Check Logs","text":"<pre><code># View recent logs\ntail -f log.txt\n\n# View log with timestamps\ncat log.txt\n</code></pre>"},{"location":"gettingstarted/#check-database","title":"Check Database","text":"<pre><code># For SQLite\nsqlite3 amiibot.db \"SELECT COUNT(*) FROM amiibo_stock;\"\n\n# For PostgreSQL\npsql -U amiibot_user -d amiibot -c \"SELECT COUNT(*) FROM amiibo_stock;\"\n</code></pre>"},{"location":"gettingstarted/#test-notification","title":"Test Notification","text":"<p>After first run, you should receive notifications for any amiibo currently in stock!</p>"},{"location":"testing/","title":"Testing Guide","text":"<p>Comprehensive guide for running tests in Amiibot.</p>"},{"location":"testing/#overview","title":"\ud83d\udccb Overview","text":"<p>Amiibot uses pytest for unit testing with coverage reporting. Tests run automatically on every push to GitHub via GitHub Actions.</p>"},{"location":"testing/#current-coverage","title":"Current Coverage","text":""},{"location":"testing/#coverage-graph","title":"Coverage Graph","text":""},{"location":"testing/#quick-start","title":"\ud83d\ude80 Quick Start","text":"<pre><code># Install dependencies\nuv sync --group dev\n\n# Run all tests\nuv run pytest\n\n# Run with verbose output\nuv run pytest -v\n\n# Run with coverage\nuv run pytest --cov\n\n# Run specific test file\nuv run pytest tests/test_database.py\n\n# Run specific test\nuv run pytest tests/test_database.py::TestDatabase::test_remove_currency_us_format\n</code></pre>"},{"location":"testing/#test-structure","title":"\ud83d\udcc1 Test Structure","text":"<pre><code>tests/\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 test_config.py          # Configuration tests\n\u251c\u2500\u2500 test_database.py        # Database tests\n\u2514\u2500\u2500 test_utils.py           # Utility function tests\n</code></pre>"},{"location":"testing/#test-categories","title":"\ud83e\uddea Test Categories","text":""},{"location":"testing/#unit-tests","title":"Unit Tests","text":"<p>Test individual functions and methods in isolation: - test_database.py - Database operations, currency parsing, validation - test_utils.py - Utility functions (formatting, calculations, etc.) - test_config.py - Configuration loading and validation</p>"},{"location":"testing/#integration-tests-future","title":"Integration Tests (Future)","text":"<p>Test interactions between components: - Scraper \u2192 Database flow - Database \u2192 Messenger flow - Complete scraping cycle</p>"},{"location":"testing/#running-tests","title":"\u2699\ufe0f Running Tests","text":""},{"location":"testing/#run-all-tests","title":"Run All Tests","text":"<pre><code>uv run pytest\n</code></pre>"},{"location":"testing/#run-with-verbose-output","title":"Run with Verbose Output","text":"<pre><code>uv run pytest -v\n</code></pre>"},{"location":"testing/#run-with-coverage-report","title":"Run with Coverage Report","text":"<pre><code># Terminal report\nuv run pytest --cov\n\n# HTML report (opens in browser)\nuv run pytest --cov --cov-report=html\nopen htmlcov/index.html\n</code></pre>"},{"location":"testing/#run-specific-tests","title":"Run Specific Tests","text":"<pre><code># Run specific file\nuv run pytest tests/test_database.py\n\n# Run specific class\nuv run pytest tests/test_database.py::TestDatabase\n\n# Run specific test\nuv run pytest tests/test_database.py::TestDatabase::test_remove_currency_us_format\n\n# Run tests matching pattern\nuv run pytest -k \"currency\"\n</code></pre>"},{"location":"testing/#run-with-output","title":"Run with Output","text":"<pre><code># Show print statements\nuv run pytest -s\n\n# Show local variables on failure\nuv run pytest -l\n\n# Stop after first failure\nuv run pytest -x\n\n# Run last failed tests\nuv run pytest --lf\n</code></pre>"},{"location":"testing/#coverage-reports","title":"\ud83d\udcca Coverage Reports","text":""},{"location":"testing/#generate-coverage-report","title":"Generate Coverage Report","text":"<pre><code># Terminal report with missing lines\nuv run pytest --cov --cov-report=term-missing\n\n# HTML report\nuv run pytest --cov --cov-report=html\n\n# XML report (for CI/CD)\nuv run pytest --cov --cov-report=xml\n</code></pre>"},{"location":"testing/#view-html-coverage","title":"View HTML Coverage","text":"<pre><code># Generate and open HTML report\nuv run pytest --cov --cov-report=html\nopen htmlcov/index.html  # macOS\nxdg-open htmlcov/index.html  # Linux\nstart htmlcov/index.html  # Windows\n</code></pre>"},{"location":"testing/#coverage-configuration","title":"Coverage Configuration","text":"<p>Coverage settings are in <code>pytest.ini</code>: - Source: All Python files - Omit: Tests, venv, site-packages - Exclude: Abstract methods, debug code</p>"},{"location":"testing/#writing-tests","title":"\ud83c\udfaf Writing Tests","text":""},{"location":"testing/#test-structure_1","title":"Test Structure","text":"<pre><code>import pytest\n\nclass TestMyFeature:\n    \"\"\"Test my feature.\"\"\"\n\n    @pytest.fixture\n    def my_fixture(self):\n        \"\"\"Setup for tests.\"\"\"\n        return \"test_data\"\n\n    def test_something(self, my_fixture):\n        \"\"\"Test something.\"\"\"\n        assert my_fixture == \"test_data\"\n</code></pre>"},{"location":"testing/#using-fixtures","title":"Using Fixtures","text":"<pre><code>@pytest.fixture\ndef database(self):\n    \"\"\"Create test database.\"\"\"\n    config = DatabaseConfig(engine=\"sqlite\", name=\"test_db\")\n    return Database(config)\n\ndef test_with_database(self, database):\n    \"\"\"Test using database fixture.\"\"\"\n    assert database is not None\n</code></pre>"},{"location":"testing/#testing-exceptions","title":"Testing Exceptions","text":"<pre><code>def test_invalid_input(self, database):\n    \"\"\"Test invalid input raises ValueError.\"\"\"\n    with pytest.raises(ValueError, match=\"invalid\"):\n        database.remove_currency(\"invalid\")\n</code></pre>"},{"location":"testing/#parametrized-tests","title":"Parametrized Tests","text":"<pre><code>@pytest.mark.parametrize(\"input,expected\", [\n    (\"$19.99\", 19.99),\n    (\"\u00a31,234.56\", 1234.56),\n    (\"\u20ac10.00\", 10.00),\n])\ndef test_currency_parsing(self, database, input, expected):\n    \"\"\"Test various currency formats.\"\"\"\n    assert database.remove_currency(input) == expected\n</code></pre>"},{"location":"testing/#github-actions-cicd","title":"\ud83e\udd16 GitHub Actions (CI/CD)","text":""},{"location":"testing/#automatic-testing","title":"Automatic Testing","text":"<p>Tests run automatically on: - Push to main/develop - Pull requests - Manual workflow dispatch</p>"},{"location":"testing/#workflow-jobs","title":"Workflow Jobs","text":"<ol> <li>Test - Run tests on Python 3.12 and 3.13</li> <li>Lint - Run ruff, black, mypy</li> <li>Security - Run bandit security scanner</li> </ol>"},{"location":"testing/#view-results","title":"View Results","text":"<p>Go to your repository on GitHub: 1. Click Actions tab 2. Select a workflow run 3. View job results and logs</p>"},{"location":"testing/#status-badges","title":"Status Badges","text":"<p>Add to README.md: <pre><code>![Tests](https://github.com/ecoppen/Amiibot/actions/workflows/tests.yml/badge.svg)\n</code></pre></p>"},{"location":"testing/#debugging-tests","title":"\ud83d\udc1b Debugging Tests","text":""},{"location":"testing/#run-with-debugging","title":"Run with Debugging","text":"<pre><code># Drop into debugger on failure\nuv run pytest --pdb\n\n# Drop into debugger on error\nuv run pytest --pdbcls=IPython.terminal.debugger:Pdb\n</code></pre>"},{"location":"testing/#print-debug-info","title":"Print Debug Info","text":"<pre><code># Show print statements\nuv run pytest -s\n\n# Show local variables on failure\nuv run pytest -l --tb=long\n\n# Extra verbose\nuv run pytest -vv\n</code></pre>"},{"location":"testing/#test-examples","title":"\ud83d\udcda Test Examples","text":""},{"location":"testing/#database-test-example","title":"Database Test Example","text":"<pre><code>def test_update_or_insert_last_scraped(self, database):\n    \"\"\"Test updating last scraped timestamp.\"\"\"\n    stockist = \"test.com\"\n\n    # First insert\n    database.update_or_insert_last_scraped(stockist)\n\n    # Verify it was inserted\n    with database.Session() as session:\n        record = session.query(LastScraped).filter_by(stockist=stockist).first()\n        assert record is not None\n        assert record.stockist == stockist\n</code></pre>"},{"location":"testing/#utility-function-test-example","title":"Utility Function Test Example","text":"<pre><code>def test_format_price_thousands(self):\n    \"\"\"Test price formatting with thousands separator.\"\"\"\n    assert format_price(1234.56, \"$\") == \"$1,234.56\"\n    assert format_price(12345.67, \"\u00a3\") == \"\u00a312,345.67\"\n</code></pre>"},{"location":"testing/#configuration-test-example","title":"Configuration Test Example","text":"<pre><code>def test_config_validation_empty_stockists(self):\n    \"\"\"Test configuration validation with empty stockists list.\"\"\"\n    config_data = {...}  # Invalid config\n\n    with pytest.raises(ValueError, match=\"at least one stockist\"):\n        load_config(temp_path)\n</code></pre>"},{"location":"testing/#test-coverage-goals","title":"\ud83c\udfaf Test Coverage Goals","text":"Component Current Goal Database 80%+ 90%+ Utils 90%+ 95%+ Config 85%+ 90%+ Overall 85%+ 90%+"},{"location":"testing/#continuous-integration","title":"\ud83d\udd04 Continuous Integration","text":""},{"location":"testing/#local-pre-commit","title":"Local Pre-commit","text":"<pre><code># Install pre-commit hooks\npre-commit install\n\n# Run manually\npre-commit run --all-files\n</code></pre>"},{"location":"testing/#ci-pipeline","title":"CI Pipeline","text":"<p>On every push: 1. \u2705 Run all tests 2. \u2705 Check code formatting (black) 3. \u2705 Check linting (ruff) 4. \u2705 Check types (mypy) 5. \u2705 Security scan (bandit) 6. \u2705 Generate coverage report</p>"},{"location":"testing/#additional-resources","title":"\ud83d\udcd6 Additional Resources","text":"<ul> <li>pytest documentation</li> <li>pytest fixtures</li> <li>Coverage.py</li> <li>GitHub Actions</li> </ul>"},{"location":"testing/#troubleshooting","title":"\ud83c\udd98 Troubleshooting","text":""},{"location":"testing/#tests-not-found","title":"Tests Not Found","text":"<pre><code># Make sure you're in the right directory\ncd /path/to/Amiibot\n\n# Make sure pytest can find tests\nuv run pytest --collect-only\n</code></pre>"},{"location":"testing/#import-errors","title":"Import Errors","text":"<pre><code># Install dependencies\nuv sync --group dev\n\n# Check Python path\nuv run python -c \"import sys; print(sys.path)\"\n</code></pre>"},{"location":"testing/#fixture-not-found","title":"Fixture Not Found","text":"<pre><code># Check fixture is defined in same file or conftest.py\n# Check fixture name spelling\n</code></pre>"},{"location":"testing/#summary","title":"\u2728 Summary","text":"<ul> <li>Run tests: <code>uv run pytest</code></li> <li>With coverage: <code>uv run pytest --cov</code></li> <li>Verbose: <code>uv run pytest -v</code></li> <li>Specific test: <code>uv run pytest tests/test_database.py::test_name</code></li> <li>CI/CD: Automatic on push via GitHub Actions</li> </ul>"},{"location":"troubleshooting/","title":"Troubleshooting Guide","text":"<p>Common issues and their solutions.</p>"},{"location":"troubleshooting/#configuration-issues","title":"Configuration Issues","text":""},{"location":"troubleshooting/#error-configuration-file-not-found","title":"Error: \"Configuration file not found\"","text":"<p>Symptom: <pre><code>ValueError: config/config.json does not exist\n</code></pre></p> <p>Solution: <pre><code>cd config\ncp config.example.json config.json\n# Edit config.json with your settings\n</code></pre></p>"},{"location":"troubleshooting/#error-discord-webhook-url-may-be-invalid","title":"Error: \"Discord webhook URL may be invalid\"","text":"<p>Symptom: <pre><code>WARNING - Discord webhook URL may be invalid: https://example.com\n</code></pre></p> <p>Solution: Ensure your webhook URL contains <code>discord.com/api/webhooks/</code>: <pre><code>https://discord.com/api/webhooks/YOUR_ID/YOUR_TOKEN\n</code></pre></p>"},{"location":"troubleshooting/#error-empty-stockists-list","title":"Error: \"Empty stockists list\"","text":"<p>Symptom: <pre><code>Configuration validation failed:\n  - Discord messenger must have at least one stockist configured\n</code></pre></p> <p>Solution: Add at least one stockist to your messenger configuration: <pre><code>{\n  \"stockists\": [\"bestbuy.com\", \"gamestop.com\"]\n}\n</code></pre></p>"},{"location":"troubleshooting/#database-issues","title":"Database Issues","text":""},{"location":"troubleshooting/#error-database-connection-failed","title":"Error: \"Database connection failed\"","text":"<p>For SQLite: - Check file permissions: <code>ls -l *.db</code> - Ensure directory is writable</p> <p>For PostgreSQL: - Check credentials in config.json - Test connection: <code>psql -U username -d amiibot</code> - Verify PostgreSQL is running: <code>systemctl status postgresql</code></p>"},{"location":"troubleshooting/#error-table-does-not-exist","title":"Error: \"Table does not exist\"","text":"<p>Solution: Tables are created automatically on first run. If missing: <pre><code>python -c \"from database import Base, Database; from config.config import load_config; config = load_config('config/config.json'); db = Database(config.database); print('Tables created')\"\n</code></pre></p>"},{"location":"troubleshooting/#scraping-issues","title":"Scraping Issues","text":""},{"location":"troubleshooting/#error-request-timed-out","title":"Error: \"Request timed out\"","text":"<p>Symptom: <pre><code>WARNING - Request timed out on attempt 1/3\n</code></pre></p> <p>Solution: - Check internet connection - Increase timeout in <code>constants.py</code>: <code>REQUEST_TIMEOUT = 10</code> - Retry will happen automatically (3 attempts)</p>"},{"location":"troubleshooting/#error-selenium-exception","title":"Error: \"Selenium exception\"","text":"<p>Symptom: <pre><code>ERROR - Selenium exception: ...\n</code></pre></p> <p>Solution: <pre><code># Install Chrome/Chromium\nsudo apt install chromium-browser chromium-chromedriver\n\n# Or update chromedriver\npip install --upgrade chromedriver-autoinstaller\n</code></pre></p>"},{"location":"troubleshooting/#error-no-items-scraped","title":"Error: \"No items scraped\"","text":"<p>Possible Causes: 1. Website structure changed 2. IP blocked by retailer 3. JavaScript not loading</p> <p>Solutions: - Check logs for specific errors - Try different network/VPN - Report issue on GitHub</p>"},{"location":"troubleshooting/#notification-issues","title":"Notification Issues","text":""},{"location":"troubleshooting/#discord-webhook-not-working","title":"Discord webhook not working","text":"<p>Check: 1. Webhook URL is correct 2. Channel still exists 3. Webhook wasn't deleted 4. Bot has permissions</p> <p>Test webhook: <pre><code>curl -X POST \"YOUR_WEBHOOK_URL\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"content\": \"Test message\"}'\n</code></pre></p>"},{"location":"troubleshooting/#telegram-bot-not-responding","title":"Telegram bot not responding","text":"<p>Check: 1. Bot token is correct 2. Chat ID is correct 3. You sent <code>/start</code> to bot 4. Bot isn't blocked</p> <p>Test bot: <pre><code>curl \"https://api.telegram.org/botYOUR_BOT_TOKEN/getMe\"\n</code></pre></p>"},{"location":"troubleshooting/#performance-issues","title":"Performance Issues","text":""},{"location":"troubleshooting/#high-cpu-usage","title":"High CPU usage","text":"<p>Causes: - Too many stockists - Selenium driver not closing</p> <p>Solutions: - Reduce stockist count - Check <code>driver.quit()</code> in logs - Increase scrape interval in cron</p>"},{"location":"troubleshooting/#high-memory-usage","title":"High memory usage","text":"<p>Causes: - Session leaks - Large log files</p> <p>Solutions: - Logs rotate automatically (5MB limit) - Clean old records: See database cleanup methods - Restart service periodically</p>"},{"location":"troubleshooting/#logs-and-debugging","title":"Logs and Debugging","text":""},{"location":"troubleshooting/#enable-debug-logging","title":"Enable debug logging","text":"<p>Edit <code>amiibot.py</code>: <pre><code>level=os.environ.get(\"LOGLEVEL\", \"DEBUG\")\n</code></pre></p> <p>Or set environment variable: <pre><code>LOGLEVEL=DEBUG python amiibot.py\n</code></pre></p>"},{"location":"troubleshooting/#view-logs","title":"View logs","text":"<pre><code># Tail logs in real-time\ntail -f log.txt\n\n# View last 100 lines\ntail -100 log.txt\n\n# Search for errors\ngrep ERROR log.txt\n\n# Check log rotation\nls -lh log.txt*\n</code></pre>"},{"location":"troubleshooting/#common-error-messages","title":"Common Error Messages","text":""},{"location":"troubleshooting/#module-not-found","title":"\"Module not found\"","text":"<p>Solution: <pre><code># Reinstall dependencies\nuv sync\n# or\npip install -e .\n</code></pre></p>"},{"location":"troubleshooting/#permission-denied","title":"\"Permission denied\"","text":"<p>Solution: <pre><code># Fix file permissions\nchmod +x amiibot_runner.sh\nchmod 644 config/config.json\n\n# Fix directory permissions\nchmod 755 /path/to/Amiibot\n</code></pre></p>"},{"location":"troubleshooting/#port-already-in-use-postgresql","title":"\"Port already in use\" (PostgreSQL)","text":"<p>Solution: <pre><code># Find process using port\nsudo lsof -i :5432\n\n# Change port in config if needed\n</code></pre></p>"},{"location":"troubleshooting/#health-checks","title":"Health Checks","text":"<p>Run these commands to verify system health:</p> <pre><code># Check Python version\npython --version  # Should be 3.12+\n\n# Check dependencies\npip list | grep -E \"beautifulsoup4|selenium|sqlalchemy\"\n\n# Check database\nsqlite3 amiibot.db \".tables\"  # SQLite\npsql -U user -d amiibot -c \"\\dt\"  # PostgreSQL\n\n# Test configuration\npython -c \"from config.config import load_config; load_config('config/config.json'); print('OK')\"\n\n# Check logs for errors\ngrep -i error log.txt | tail -20\n</code></pre>"}]}